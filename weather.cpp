/*
  Weather.h - Library for getting weather information from openweathermap.org.
  Created by Patrick Lenger, 2018
*/
#include "Arduino.h"
#include "Weather.h"
#include <ArduinoJson.h>
#include <ESP8266WiFi.h>
#include <ESP8266HTTPClient.h>

String _key;
const char* WEATHER_URL_TEMPLATE = "http://api.openweathermap.org/data/2.5/weather?units=metric&lang=de&q=%1,de&appid=%2";
const char* FORECAST_URL_TEMPLATE = "http://api.openweathermap.org/data/2.5/forecast?units=metric&lang=de&q=%1,de&appid=%2&cnt=10";

// Images for weather (all 50x50 pixel, horizontal draw mode)
// convert images to byte array: http://javl.github.io/image2cpp/
const unsigned char PROGMEM pic01d[] =  {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0xc0, 0x38,
  0x00, 0x00, 0x00, 0x07, 0x80, 0xc0, 0x78, 0x00, 0x00, 0x00, 0x03, 0xc0, 0x00, 0xf0, 0x00, 0x00,
  0x00, 0x01, 0xc0, 0x01, 0xe0, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x00, 0xc0, 0x00, 0x00, 0x00, 0x00,
  0x03, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xfe,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xff, 0x00, 0x00,
  0x00, 0x00, 0x7e, 0x3f, 0xff, 0x1f, 0x80, 0x00, 0x00, 0xfe, 0x3f, 0xff, 0x1f, 0xc0, 0x00, 0x00,
  0x7e, 0x3f, 0xff, 0x1f, 0x80, 0x00, 0x00, 0x00, 0x3f, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f,
  0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xfc, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x07, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc1, 0xe0, 0xc0, 0x00, 0x00,
  0x00, 0x01, 0xc0, 0x01, 0xe0, 0x00, 0x00, 0x00, 0x03, 0xc0, 0x00, 0xf0, 0x00, 0x00, 0x00, 0x07,
  0x80, 0x00, 0x78, 0x00, 0x00, 0x00, 0x07, 0x00, 0xc0, 0x38, 0x00, 0x00, 0x00, 0x06, 0x00, 0xc0,
  0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};
const unsigned char PROGMEM pic01n[] = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
  0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xf0, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x03, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xf0, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x03, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x03, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xff,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xff, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xf0, 0x0c,
  0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x7f, 0xff, 0xf8, 0x00, 0x00,
  0x00, 0x00, 0x3f, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xff, 0xe0, 0x00, 0x00, 0x00, 0x00,
  0x0f, 0xff, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x03, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};
const unsigned char PROGMEM pic02d[] = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0e,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x0e, 0x01, 0x80, 0x00, 0x00, 0x00, 0x78, 0x0e, 0x03, 0xc0,
  0x00, 0x00, 0x00, 0x3c, 0x00, 0x07, 0x80, 0x00, 0x00, 0x00, 0x1e, 0x00, 0x0f, 0x00, 0x00, 0x00,
  0x00, 0x0e, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x04, 0x1f, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x7f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0x7f, 0x00, 0x00, 0x00, 0x00, 0x01, 0xf9, 0xff,
  0xc0, 0x00, 0x00, 0x00, 0x01, 0xe7, 0xff, 0xe0, 0x00, 0x00, 0x00, 0x03, 0xef, 0x80, 0xf0, 0x00,
  0x00, 0x07, 0xf3, 0xde, 0x00, 0x7f, 0x00, 0x00, 0x07, 0xf3, 0x9c, 0x00, 0x3f, 0xe0, 0x00, 0x00,
  0x03, 0xb8, 0x00, 0x1f, 0xf0, 0x00, 0x00, 0x01, 0x38, 0x00, 0x00, 0xf8, 0x00, 0x00, 0x00, 0xf0,
  0x00, 0x00, 0x3c, 0x00, 0x00, 0x03, 0xf0, 0x00, 0x00, 0x1c, 0x00, 0x00, 0x03, 0xf0, 0x00, 0x00,
  0x1c, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x0e, 0x00,
  0x00, 0x0e, 0x00, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x2e, 0x00, 0x00, 0x00, 0x0c, 0x00, 0x00, 0x6e,
  0x00, 0x00, 0x00, 0x1c, 0x00, 0x00, 0x2e, 0x00, 0x00, 0x00, 0x1c, 0x00, 0x00, 0x07, 0x00, 0x00,
  0x00, 0x78, 0x00, 0x00, 0x07, 0xc0, 0x00, 0x01, 0xf0, 0x00, 0x00, 0x03, 0xff, 0xff, 0xff, 0xe0,
  0x00, 0x00, 0x01, 0xff, 0xff, 0xff, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};
const unsigned char PROGMEM pic02n[] = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xf0, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x01, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xf0, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x01, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x01, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x01, 0xfe, 0x3e,
  0x00, 0x00, 0x00, 0x00, 0x07, 0xff, 0x9f, 0x80, 0x00, 0x00, 0x00, 0x0f, 0xdf, 0xcf, 0xc0, 0x00,
  0x00, 0x00, 0x1e, 0x01, 0xe0, 0x70, 0x0e, 0x00, 0x00, 0x38, 0x00, 0xfe, 0x3f, 0xfc, 0x00, 0x00,
  0x78, 0x00, 0x7f, 0x8f, 0xf8, 0x00, 0x00, 0x70, 0x00, 0x3f, 0xe7, 0xf0, 0x00, 0x00, 0x60, 0x00,
  0x01, 0xf7, 0xe0, 0x00, 0x03, 0xe0, 0x00, 0x00, 0x73, 0xc0, 0x00, 0x07, 0xe0, 0x00, 0x00, 0x3b,
  0x00, 0x00, 0x0f, 0xa0, 0x00, 0x00, 0x38, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x38, 0x00, 0x00,
  0x1c, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x1c, 0x00, 0x00, 0x00, 0x38, 0x00, 0x00, 0x1c, 0x00,
  0x00, 0x00, 0x38, 0x00, 0x00, 0x1c, 0x00, 0x00, 0x00, 0x38, 0x00, 0x00, 0x1c, 0x00, 0x00, 0x00,
  0x70, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x00, 0xf0, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0xe0, 0x00,
  0x00, 0x07, 0xff, 0xff, 0xff, 0xc0, 0x00, 0x00, 0x01, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};
const unsigned char PROGMEM pic03d[] = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x07, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xf8, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x7f, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf8, 0x1f, 0x00, 0x00, 0x00, 0x00, 0x01,
  0xe0, 0x07, 0xe0, 0x00, 0x00, 0x00, 0x01, 0xc0, 0x03, 0xfc, 0x00, 0x00, 0x00, 0x03, 0x80, 0x01,
  0xff, 0x00, 0x00, 0x00, 0x03, 0x80, 0x01, 0x0f, 0x80, 0x00, 0x00, 0x07, 0x00, 0x00, 0x03, 0x80,
  0x00, 0x00, 0x1f, 0x00, 0x00, 0x01, 0xc0, 0x00, 0x00, 0x3f, 0x00, 0x00, 0x01, 0xc0, 0x00, 0x00,
  0x78, 0x00, 0x00, 0x00, 0xc0, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0xe0, 0x00, 0x00, 0xe0, 0x00,
  0x00, 0x00, 0xe0, 0x00, 0x00, 0xe0, 0x00, 0x00, 0x00, 0xc0, 0x00, 0x00, 0xe0, 0x00, 0x00, 0x01,
  0xc0, 0x00, 0x00, 0xe0, 0x00, 0x00, 0x01, 0xc0, 0x00, 0x00, 0x70, 0x00, 0x00, 0x03, 0x80, 0x00,
  0x00, 0x7c, 0x00, 0x00, 0x1f, 0x00, 0x00, 0x00, 0x3f, 0xff, 0xff, 0xfe, 0x00, 0x00, 0x00, 0x0f,
  0xff, 0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};
const unsigned char PROGMEM pic04d[] = {
  // '04d', 50x50px
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xf0,
0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xff, 0x00, 0x00,
0x00, 0x00, 0x00, 0x3e, 0x07, 0x80, 0x00, 0x00, 0x00, 0x00, 0x78, 0x03, 0x00, 0x00, 0x00, 0x00,
0x00, 0xf0, 0x00, 0x7f, 0xc0, 0x00, 0x00, 0x00, 0xe0, 0x01, 0xff, 0xf0, 0x00, 0x00, 0x01, 0xc0,
0x03, 0xf1, 0xf8, 0x00, 0x00, 0x01, 0xc0, 0x07, 0x80, 0x3c, 0x00, 0x00, 0x0f, 0xc0, 0x0f, 0x00,
0x1f, 0xe0, 0x00, 0x1f, 0xc0, 0x0e, 0x00, 0x0f, 0xf0, 0x00, 0x1e, 0x00, 0x1c, 0x00, 0x07, 0xfc,
0x00, 0x38, 0x00, 0x1c, 0x00, 0x00, 0x1c, 0x00, 0x38, 0x00, 0x7c, 0x00, 0x00, 0x0e, 0x00, 0x30,
0x01, 0xfc, 0x00, 0x00, 0x0f, 0x00, 0x30, 0x01, 0xe0, 0x00, 0x00, 0x07, 0x00, 0x38, 0x03, 0x80,
0x00, 0x00, 0x07, 0x00, 0x38, 0x03, 0x80, 0x00, 0x00, 0x07, 0x00, 0x1c, 0x07, 0x00, 0x00, 0x00,
0x07, 0x00, 0x1f, 0xf7, 0x00, 0x00, 0x00, 0x07, 0x00, 0x0f, 0xf3, 0x00, 0x00, 0x00, 0x0e, 0x00,
0x01, 0xf3, 0x80, 0x00, 0x00, 0x0e, 0x00, 0x00, 0x03, 0xc0, 0x00, 0x00, 0x3c, 0x00, 0x00, 0x01,
0xff, 0xff, 0xff, 0xf8, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x3f, 0xff,
0xff, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};
const unsigned char PROGMEM pic09d[] = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x0f, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0x0f, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x3c, 0x01,
  0x80, 0x00, 0x00, 0x00, 0x00, 0x78, 0x00, 0x3f, 0xc0, 0x00, 0x00, 0x00, 0x70, 0x00, 0xff, 0xf0,
  0x00, 0x00, 0x00, 0xe0, 0x01, 0xf9, 0xf8, 0x00, 0x00, 0x00, 0xe0, 0x03, 0xc0, 0x3c, 0x00, 0x00,
  0x03, 0xc0, 0x07, 0x80, 0x1f, 0xe0, 0x00, 0x0f, 0xc0, 0x07, 0x00, 0x0f, 0xf8, 0x00, 0x0e, 0x00,
  0x0e, 0x00, 0x07, 0xfc, 0x00, 0x1c, 0x00, 0x0e, 0x00, 0x00, 0x1e, 0x00, 0x18, 0x00, 0x3c, 0x00,
  0x00, 0x0e, 0x00, 0x38, 0x00, 0xfc, 0x00, 0x00, 0x07, 0x00, 0x38, 0x01, 0xf0, 0x00, 0x00, 0x07,
  0x00, 0x18, 0x01, 0xc0, 0x00, 0x00, 0x03, 0x00, 0x1c, 0x03, 0x80, 0x00, 0x00, 0x03, 0x80, 0x1e,
  0x03, 0x80, 0x00, 0x00, 0x03, 0x00, 0x0f, 0xfb, 0x80, 0x00, 0x00, 0x07, 0x00, 0x07, 0xfb, 0x80,
  0x00, 0x00, 0x07, 0x00, 0x01, 0xfb, 0x80, 0x06, 0x00, 0x0f, 0x00, 0x00, 0x01, 0xc0, 0x1e, 0x00,
  0x1e, 0x00, 0x00, 0x00, 0xfe, 0x3c, 0xff, 0xfc, 0x00, 0x00, 0x00, 0x7e, 0x7c, 0xff, 0xf8, 0x00,
  0x00, 0x00, 0x3c, 0xfc, 0xff, 0xe0, 0x00, 0x00, 0x00, 0x01, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x23, 0xf8, 0x04, 0x00, 0x00, 0x00, 0x00, 0xe3, 0xf8, 0x1c, 0x00, 0x00, 0x00, 0x01, 0xc1, 0xf8,
  0x3c, 0x00, 0x00, 0x00, 0x03, 0xc0, 0xf0, 0x78, 0x00, 0x00, 0x00, 0x03, 0xc0, 0x00, 0x78, 0x00,
  0x00, 0x00, 0x03, 0x80, 0x00, 0x78, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc0
};
const unsigned char PROGMEM pic10d[] = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0xe0, 0x18, 0x03, 0x00, 0x00, 0x00, 0x00,
  0xf0, 0x18, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x78, 0x00, 0x0e, 0x00, 0x00, 0x00, 0x00, 0x3c, 0x00,
  0x1c, 0x00, 0x00, 0x00, 0x00, 0x18, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7e, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x01, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xf1, 0xfe, 0x00, 0x00, 0x00,
  0x00, 0x03, 0xe7, 0xff, 0x80, 0x00, 0x00, 0x00, 0x07, 0xcf, 0xcf, 0xc0, 0x00, 0x00, 0x0f, 0x87,
  0x9e, 0x01, 0xe0, 0x00, 0x00, 0x1f, 0xc7, 0x38, 0x00, 0xfe, 0x00, 0x00, 0x0f, 0xc7, 0x78, 0x00,
  0x7f, 0xc0, 0x00, 0x00, 0x06, 0x70, 0x00, 0x3f, 0xe0, 0x00, 0x00, 0x00, 0xe0, 0x00, 0x01, 0xf0,
  0x00, 0x00, 0x03, 0xe0, 0x00, 0x00, 0x70, 0x00, 0x00, 0x07, 0xe0, 0x00, 0x00, 0x38, 0x00, 0x00,
  0x0f, 0x80, 0x00, 0x00, 0x38, 0x00, 0x00, 0x1e, 0x00, 0x00, 0x00, 0x38, 0x00, 0x00, 0x1c, 0x00,
  0x00, 0x00, 0x18, 0x00, 0x00, 0x1c, 0x00, 0x00, 0x00, 0x38, 0x00, 0x00, 0x58, 0x00, 0x00, 0x00,
  0x38, 0x00, 0x00, 0xdc, 0x00, 0x00, 0x00, 0x38, 0x00, 0x00, 0xdc, 0x00, 0x30, 0x00, 0x70, 0x00,
  0x00, 0x1e, 0x00, 0x70, 0x00, 0xf0, 0x00, 0x00, 0x0f, 0xf9, 0xe7, 0xff, 0xe0, 0x00, 0x00, 0x07,
  0xf3, 0xe7, 0xff, 0xc0, 0x00, 0x00, 0x01, 0xe7, 0xe7, 0xff, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xe0,
  0x00, 0x00, 0x00, 0x00, 0x01, 0x1f, 0xe0, 0x20, 0x00, 0x00, 0x00, 0x07, 0x1f, 0xc0, 0x60, 0x00,
  0x00, 0x00, 0x0e, 0x0f, 0xc1, 0xe0, 0x00, 0x00, 0x00, 0x1e, 0x0f, 0x83, 0xc0, 0x00, 0x00, 0x00,
  0x1e, 0x03, 0x03, 0xc0, 0x00, 0x00, 0x00, 0x1c, 0x00, 0x03, 0xc0, 0x00, 0x00, 0x00, 0x0c, 0x00,
  0x01, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xc0
};
const unsigned char PROGMEM pic11d[] = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xe0, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x3f, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7f, 0xfe, 0x00, 0x00, 0x00,
  0x00, 0x00, 0xf0, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x01, 0xe0, 0x07, 0xf0, 0x00, 0x00, 0x00, 0x01,
  0xc0, 0x03, 0xfc, 0x00, 0x00, 0x00, 0x03, 0x80, 0x01, 0xff, 0x00, 0x00, 0x00, 0x03, 0x80, 0x00,
  0x0f, 0x80, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x03, 0x80, 0x00, 0x00, 0x3f, 0x00, 0x00, 0x01, 0xc0,
  0x00, 0x00, 0x7f, 0x00, 0x00, 0x01, 0xc0, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0xc0, 0x00, 0x00,
  0xe0, 0x00, 0x00, 0x00, 0xc0, 0x00, 0x00, 0xe0, 0x00, 0x00, 0x00, 0xc0, 0x00, 0x00, 0xe0, 0x00,
  0x00, 0x01, 0xc0, 0x00, 0x00, 0xe0, 0x00, 0x00, 0x01, 0xc0, 0x00, 0x00, 0xe0, 0x00, 0x00, 0x03,
  0xc0, 0x00, 0x00, 0x70, 0x01, 0xf0, 0x07, 0x80, 0x00, 0x00, 0x7f, 0xfd, 0xe7, 0xff, 0x00, 0x00,
  0x00, 0x3f, 0xfd, 0xef, 0xfe, 0x00, 0x00, 0x00, 0x0f, 0xfb, 0xcf, 0xf8, 0x00, 0x00, 0x00, 0x00,
  0x03, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xe0,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0xc0, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x01, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};
const unsigned char PROGMEM pic13d[] = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x07, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7f,
  0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf8, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x01, 0xe0, 0x07, 0xf0,
  0x00, 0x00, 0x00, 0x01, 0xc0, 0x03, 0xfe, 0x00, 0x00, 0x00, 0x03, 0x80, 0x01, 0xff, 0x00, 0x00,
  0x00, 0x03, 0x80, 0x00, 0x07, 0x80, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x03, 0xc0, 0x00, 0x00, 0x1f,
  0x00, 0x00, 0x01, 0xc0, 0x00, 0x00, 0x3f, 0x00, 0x00, 0x01, 0xc0, 0x00, 0x00, 0x70, 0x00, 0x00,
  0x00, 0xe0, 0x00, 0x00, 0x70, 0x00, 0x00, 0x00, 0xe0, 0x00, 0x00, 0xe0, 0x00, 0x00, 0x00, 0xe0,
  0x00, 0x00, 0xe0, 0x00, 0x00, 0x00, 0xc0, 0x00, 0x00, 0xe0, 0x00, 0x00, 0x01, 0xc0, 0x00, 0x00,
  0x70, 0x00, 0x00, 0x03, 0xc0, 0x00, 0x00, 0x70, 0x00, 0x00, 0x07, 0x80, 0x00, 0x00, 0x3e, 0x00,
  0x00, 0x3f, 0x00, 0x00, 0x00, 0x3f, 0xff, 0xff, 0xfe, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xfc,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xc0, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x0f, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x80, 0x00, 0x00, 0x00, 0x01, 0x80, 0x0f,
  0xc0, 0x00, 0x00, 0x00, 0x07, 0xe0, 0x03, 0x00, 0x00, 0x00, 0x00, 0x07, 0xc0, 0x02, 0x00, 0x00,
  0x00, 0x00, 0x07, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x01, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};
const unsigned char PROGMEM pic50d[] = {
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x3f, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7f, 0xf8, 0x00, 0x00, 0x00,
  0x00, 0x00, 0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03,
  0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x07, 0xff, 0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xff, 0xff, 0xc0,
  0x00, 0x00, 0x3f, 0xff, 0xff, 0xff, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x00, 0x03, 0xff, 0xff,
  0xff, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xe0, 0x00, 0x07, 0xff, 0xff, 0xff, 0xff, 0xe0, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0xff, 0xff, 0xff, 0xff, 0x80, 0x00, 0x01, 0xff,
  0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

Weather::Weather(String key)
{
  _key = key;
}

String callUrlAndGetResponse(String url) {
  if (WiFi.status() == WL_CONNECTED) {
    HTTPClient http;
    Serial.println("URL: " + url);
    http.begin(url);
    int httpCode = http.GET();
    String payload;
    if (httpCode > 0) {
      payload = http.getString();
    }

    http.end();   //Close connection
    Serial.println("HTTP connection closed");
    return payload;
  }
  Serial.println("Not connected to WLAN");
  return "";
}

void setIconBitmp(WeatherData weatherData, String icon) {
  Serial.println(icon);
  if (icon == "01d") {
    weatherData.iconBitmap = pic01d;
    weatherData.iconBitmapSet = true;
  } else if (icon == "01n") {
    weatherData.iconBitmap = pic01n;
    weatherData.iconBitmapSet = true;
  } else if (icon == "02d") {
    weatherData.iconBitmap = pic02d;
    weatherData.iconBitmapSet = true;
  } else if (icon == "02n") {
    weatherData.iconBitmap = pic02n;
    weatherData.iconBitmapSet = true;
  } else if (icon == "03d") {
    weatherData.iconBitmap = pic03d;
    weatherData.iconBitmapSet = true;
  } else if (String("04d").equals(icon)) {
    weatherData.iconBitmap = pic04d;
    weatherData.iconBitmapSet = true;
  } else if (icon == "09d") {
    weatherData.iconBitmap = pic09d;
    weatherData.iconBitmapSet = true;
  } else if (icon == "10d") {
    weatherData.iconBitmap = pic10d;
    weatherData.iconBitmapSet = true;
  } else if (icon == "11d") {
    weatherData.iconBitmap = pic11d;
    weatherData.iconBitmapSet = true;
  } else if (icon == "13d") {
    weatherData.iconBitmap = pic13d;
    weatherData.iconBitmapSet = true;
  } else if (icon == "50d") {
    weatherData.iconBitmap = pic50d;
    weatherData.iconBitmapSet = true;
  } else {
    weatherData.iconBitmapSet = false;
  }
  weatherData.iconBitmap = pic10d;
  weatherData.iconBitmapSet = true;
}

WeatherData Weather::getCurrentWeather(String city)
{
  WeatherData weatherData;

  if (city.length() == 0) {
    weatherData.error = "no city specified";
    return weatherData;
  }
  String url = WEATHER_URL_TEMPLATE;
  url.replace("%1", city);
  url.replace("%2", _key);

  String payload = callUrlAndGetResponse(url);
  if (payload.length() == 0) {
    weatherData.error = "No weather data received";
    return weatherData;
  }
  StaticJsonBuffer<2000> jsonBuffer;
  JsonObject &root = jsonBuffer.parseObject(payload);
  if (!root.success()) {
    weatherData.error = "Failed to read JSON";
    return weatherData;
  }
  Serial.println("JSON parsed");
  String degree = root["main"]["temp"];
  int degreeInt = degree.toInt();
  Serial.println("degree: " + String(degreeInt));
  String weather = root["weather"][0]["description"];
  Serial.println("weather: " + weather);
  String icon = root["weather"][0]["icon"];
  Serial.println("weather: " + icon);
  weatherData.error = "";
  weatherData.temperatureCelsius = degreeInt;
  weatherData.weatherDescription = weather;
  weatherData.icon = icon;

  if (String("01d").equals(icon)) {
    weatherData.iconBitmap = pic01d;
    weatherData.iconBitmapSet = true;
  } else if (String("01n").equals(icon)) {
    weatherData.iconBitmap = pic01n;
    weatherData.iconBitmapSet = true;
  } else if (String("02d").equals(icon)) {
    weatherData.iconBitmap = pic02d;
    weatherData.iconBitmapSet = true;
  } else if (String("02n").equals(icon)) {
    weatherData.iconBitmap = pic02n;
    weatherData.iconBitmapSet = true;
  } else if (String("03d").equals(icon)) {
    weatherData.iconBitmap = pic03d;
    weatherData.iconBitmapSet = true;
  } else if (String("04d").equals(icon)) {
    weatherData.iconBitmap = pic04d;
    weatherData.iconBitmapSet = true;
  } else if (String("09d").equals(icon)) {
    weatherData.iconBitmap = pic09d;
    weatherData.iconBitmapSet = true;
  } else if (String("10d").equals(icon)) {
    weatherData.iconBitmap = pic10d;
    weatherData.iconBitmapSet = true;
  } else if (String("11d").equals(icon)) {
    weatherData.iconBitmap = pic11d;
    weatherData.iconBitmapSet = true;
  } else if (String("13d").equals(icon)) {
    weatherData.iconBitmap = pic13d;
    weatherData.iconBitmapSet = true;
  } else if (String("50d").equals(icon)) {
    weatherData.iconBitmap = pic50d;
    weatherData.iconBitmapSet = true;
  } else {
    weatherData.iconBitmapSet = false;
  }
  return weatherData;
}
